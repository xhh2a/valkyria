# this is a check to see if a major has at least 50 factories
# which means it's not just a faction leader (which anyone can be)
is_actual_major = {
	AND = {
		is_major = yes
		OR = {
			AND = {
				num_of_factories > 49
				date < 1940.1.1
			}
			AND = {
				num_of_factories > 74
				NOT = { date < 1940.1.1 }
				date < 1942.1.1
			}
			AND = {
				num_of_factories > 99
				NOT = { date < 1942.1.1 }
				date < 1944.1.1
			}
			AND = {
				num_of_factories > 124
				NOT = { date < 1944.1.1 }
				date < 1946.1.1
			}
			num_of_factories > 149
		}
	}
}

# checks whether the country in scope has the same government as ROOT (the country running the event/focus)
has_same_government_as_ROOT = {
	OR = {
		AND = {
			has_government = totalist
			ROOT = { has_government = totalist }
		}
		AND = {
			has_government = syndicalist
			ROOT = { has_government = syndicalist }
		}
		AND = {
			has_government = radical_socialist
			ROOT = { has_government = radical_socialist }
		}
		AND = {
			has_government = social_democrat
			ROOT = { has_government = social_democrat }
		}
		AND = {
			has_government = social_liberal
			ROOT = { has_government = social_liberal }
		}
		AND = {
			has_government = market_liberal
			ROOT = { has_government = market_liberal }
		}
		AND = {
			has_government = social_conservative
			ROOT = { has_government = social_conservative }
		}
		AND = {
			has_government = authoritarian_democrat
			ROOT = { has_government = authoritarian_democrat }
		}
		AND = {
			has_government = paternal_autocrat
			ROOT = { has_government = paternal_autocrat }
		}
		AND = {
			has_government = national_populist
			ROOT = { has_government = national_populist }
		}
	}
}

# checks for these three government types for the country in scope
has_socialist_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_socialist
		OR = {
			has_government = totalist
			has_government = syndicalist
			has_government = radical_socialist
			AND = {
				has_government = social_democrat
				has_country_flag = soc_dems_are_socialists
			}
		}
	}
}

not_has_socialist_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_not_socialist
		NOT = {
			has_government = totalist
			has_government = syndicalist
			has_government = radical_socialist
			AND = {
				has_government = social_democrat
				has_country_flag = soc_dems_are_socialists
			}
		}
	}
}

# checks for these four government types for the country in scope
has_elected_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_elected
		OR = {
			AND = {
				has_government = social_democrat
				NOT = { has_country_flag = soc_dems_are_socialists }
			}
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}
}

not_has_elected_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_not_elected
		NOT = {
			AND = {
				has_government = social_democrat
				NOT = { has_country_flag = soc_dems_are_socialists }
			}
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
		}
	}
}

# checks for these five government types for the country in scope
has_democratic_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_democratic
		OR = {
			AND = {
				has_government = social_democrat
				NOT = { has_country_flag = soc_dems_are_socialists }
			}
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
			has_government = authoritarian_democrat
		}
	}
}

not_has_democratic_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_not_democratic
		NOT = {
			AND = {
				has_government = social_democrat
				NOT = { has_country_flag = soc_dems_are_socialists }
			}
			has_government = social_liberal
			has_government = market_liberal
			has_government = social_conservative
			has_government = authoritarian_democrat
		}
	}
}

# checks for these two government types for the country in scope
has_authoritarian_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_authoritarian
		OR = {
			has_government = authoritarian_democrat
			has_government = paternal_autocrat
			has_government = national_populist
		}
	}
}

not_has_authoritarian_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_not_authoritarian
		NOT = {
			has_government = authoritarian_democrat
			has_government = paternal_autocrat
			has_government = national_populist
		}
	}
}

# checks for these two government types for the country in scope
has_dictatorship_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_dictatorship
		OR = {
			has_government = paternal_autocrat
			has_government = national_populist
		}
	}
}

not_has_dictatorship_government = {
	custom_trigger_tooltip = {
		tooltip = KR_is_not_dictatorship
		NOT = {
			has_government = paternal_autocrat
			has_government = national_populist
		}
	}
}

has_right_democratic_government = {
	custom_trigger_tooltip = {
		tooltip = KR_right_wing_democracy
		OR = {
			has_government = social_conservative
			has_government = market_liberal
		}
	}
}

has_left_democratic_government = {
	custom_trigger_tooltip = {
		tooltip = KR_left_wing_democracy
		OR = {
			has_government = social_liberal
			has_government = social_democrat
		}
	}
}

not_has_right_democratic_government = {
	custom_trigger_tooltip = {
		tooltip = KR_not_right_wing_democracy
		NOT = {
			has_government = social_conservative
			has_government = market_liberal
		}
	}
}

not_has_left_democratic_government = {
	custom_trigger_tooltip = {
		tooltip = KR_not_left_wing_democracy
		NOT = {
			has_government = social_liberal
			has_government = social_democrat
		}
	}
}

# checks whether the country in scope has the same government type as ROOT (the country running the event/focus)
# note that it's not the exact same government - just the general type, as above
same_government_type_as_ROOT = {
	OR = {
		AND = {
			has_socialist_government = yes
			ROOT = { has_socialist_government = yes }
		}
		AND = {
			has_democratic_government = yes
			ROOT = { has_democratic_government = yes }
		}
		AND = {
			has_dictatorship_government = yes
			ROOT = { has_dictatorship_government = yes }
		}
	}
}

# the following triggers will check if the country in scope is on a particular continent
# note that these are continents as per the game - asia and middle-east are considered separate continents
is_in_asia = {
	capital_scope = {
		OR = {
			is_on_continent = asia
			is_on_continent = india
		}
	}
}

is_in_india = {
	capital_scope = {
		is_on_continent = india
	}
}

is_in_europe = {
	capital_scope = {
		is_on_continent = europe
	}
}

is_in_africa = {
	capital_scope = {
		is_on_continent = africa
	}
}

is_in_north_america = {
	capital_scope = {
		OR = {
			is_on_continent = north_america
			is_on_continent = central_america
		}
	}
}

is_in_central_america = {
	capital_scope = {
		is_on_continent = central_america
	}
}

is_in_south_america = {
	capital_scope = {
		is_on_continent = south_america
	}
}

is_in_middle_east = {
	capital_scope = {
		is_on_continent = middle_east
	}
}

is_in_australia = {
	capital_scope = {
		is_on_continent = australia
	}
}

# checks whether the country in scope is in the same continent as ROOT (the country running the event)
same_continent_as_ROOT = {
	OR = {
		AND = {
			is_in_asia = yes
			ROOT = { is_in_asia = yes }
		}
		AND = {
			is_in_europe = yes
			ROOT = { is_in_europe = yes }
		}
		AND = {
			is_in_africa = yes
			ROOT = { is_in_africa = yes }
		}
		AND = {
			is_in_north_america = yes
			ROOT = { is_in_north_america = yes }
		}
		AND = {
			is_in_south_america = yes
			ROOT = { is_in_south_america = yes }
		}
		AND = {
			is_in_middle_east = yes
			ROOT = { is_in_middle_east = yes }
		}
		AND = {
			is_in_australia = yes
			ROOT = { is_in_australia = yes }
		}
	}
}

# checks whether the state in scope is on the same continent as ROOT (the country running the event)
state_same_continent_as_ROOT = {
	OR = {
		AND = {
			OR = {
				is_on_continent = asia
				is_on_continent = india
			}
			ROOT = { is_in_asia = yes }
		}
		AND = {
			is_on_continent = europe
			ROOT = { is_in_europe = yes }
		}
		AND = {
			is_on_continent = africa
			ROOT = { is_in_africa = yes }
		}
		AND = {
			OR = {
				is_on_continent = north_america
				is_on_continent = central_america
			}
			ROOT = { is_in_north_america = yes }
		}
		AND = {
			is_on_continent = south_america
			ROOT = { is_in_south_america = yes }
		}
		AND = {
			is_on_continent = middle_east
			ROOT = { is_in_middle_east = yes }
		}
		AND = {
			is_on_continent = australia
			ROOT = { is_in_australia = yes }
		}
	}
}

### world news triggers
wants_world_news = {
	OR = {
		has_global_flag = NEWS_ALL
		has_global_flag = NEWS_SOME
	}
}

regional_europe_news = {
	OR = {
		has_global_flag = NEWS_ALL
		is_in_europe = yes
		any_neighbor_country = {
			is_in_europe = yes
			is_owner_neighbor_of = ROOT
		}
	}
}

regional_asia_news = {
	OR = {
		has_global_flag = NEWS_ALL
		is_in_asia = yes
		is_in_australia = yes
		any_neighbor_country = {
			is_in_asia = yes
			is_owner_neighbor_of = ROOT
		}
	}
}

regional_africa_news = {
	OR = {
		has_global_flag = NEWS_ALL
		is_in_africa = yes
		any_neighbor_country = {
			is_in_africa = yes
			is_owner_neighbor_of = ROOT
		}
	}
}

regional_north_america_news = {
	OR = {
		has_global_flag = NEWS_ALL
		is_in_north_america = yes
		any_neighbor_country = {
			is_in_north_america = yes
			is_owner_neighbor_of = ROOT
		}
	}
}

regional_south_america_news = {
	OR = {
		has_global_flag = NEWS_ALL
		is_in_south_america = yes
		any_neighbor_country = {
			is_in_south_america = yes
			is_owner_neighbor_of = ROOT
		}
	}
}

regional_middle_east_news = {
	OR = {
		has_global_flag = NEWS_ALL
		is_in_middle_east = yes
		any_neighbor_country = {
			is_in_middle_east = yes
			is_owner_neighbor_of = ROOT
		}
	}
}

# Can be used in any country scope (to ensure the country has no owned state which it doesn't control)
controls_all_owned_states = {
	custom_trigger_tooltip = {
		tooltip = controls_all_states
		NOT = {
			any_owned_state = {
				NOT = { is_controlled_by = PREV }
			}
		}
	}
}

# Checks if the country is in a faction or a puppet
is_ally_of_ROOT = {
	OR = {
		is_in_faction_with = ROOT
		is_subject_of = ROOT
		ROOT = { is_subject_of = PREV }
	}
}

is_ally_of_PREV = {
	OR = {
		is_in_faction_with = PREV
		is_subject_of = PREV
		PREV = { is_subject_of = PREV }
	}
}

# Can be used in state scope, to check if the owner is ROOT or a subject of ROOT
is_owned_by_ROOT_or_subject = {
	owner = {
		OR = {
			tag = ROOT
			is_subject_of = ROOT
		}
	}
}

# Can be used in state scope, to check if the owner is ROOT or an ally/subject of ROOT
is_owned_by_ROOT_or_ally = {
	owner = {
		OR = {
			tag = ROOT
			is_subject_of = ROOT
			is_in_faction_with = ROOT
		}
	}
}

is_owned_by_ROOT_or_war_ally = {
	owner = {
		OR = {
			tag = ROOT
			is_subject_of = ROOT
			is_in_faction_with = ROOT
			has_war_together_with = ROOT
		}
	}
}

# Can be used in state scope, to check if the controller (not owner) is ROOT or a subject of ROOT
is_controlled_by_ROOT_or_subject = {
	controller = {
		OR = {
			tag = ROOT
			is_subject_of = ROOT
		}
	}
}

# Can be used in state scope, to check if the controller (not owner) is ROOT or ally/subject of ROOT
is_controlled_by_ROOT_or_ally = {
	controller = {
		OR = {
			tag = ROOT
			is_subject_of = ROOT
			is_in_faction_with = ROOT
		}
	}
}

# Can be used in state scope, to check if the owner and controller is ROOT or a subject of ROOT
is_owned_and_controlled_by_ROOT_or_subject = {
	owner = {
		controls_state = PREV
		OR = {
			tag = ROOT
			is_subject_of = ROOT
		}
	}
}

# Can be used in state scope, to check if the owner and controller is ROOT or a subject of ROOT
is_owned_and_controlled_by_ROOT_or_ally = {
	owner = {
		controls_state = PREV
		OR = {
			tag = ROOT
			is_subject_of = ROOT
			is_in_faction_with = ROOT
		}
	}
}

# Used to check whether or not you can actually declare war on the target nation, use it in "bypass" for national foci
is_invalid_war_target = {
	custom_trigger_tooltip = {
		tooltip = is_invalid_war_target_tooltip
		OR = {
			tag = ROOT
			has_capitulated = yes
			NOT = { exists = yes }
			is_subject_of = ROOT
			is_in_faction_with = ROOT
			has_war_with = ROOT
			ROOT = { is_subject_of = PREV }
			OVERLORD = {
				ROOT = {
					is_subject_of = PREV
				}
			}
		}
	}
}

# Used to check whether or not you can actually declare war on the target nation, use it in "available" for national foci
is_valid_war_target = {
	custom_trigger_tooltip = {
		tooltip = is_valid_war_target_tooltip
		NOT = {
			tag = ROOT
			has_capitulated = yes
			NOT = { exists = yes }
			is_subject_of = ROOT
			is_in_faction_with = ROOT
			has_war_with = ROOT
			ROOT = { is_subject_of = PREV }
			OVERLORD = {
				ROOT = {
					is_subject_of = PREV
				}
			}
		}
	}
}

ROOT_is_in_alliance = {
	OR = {
		VAL = {
			is_faction_leader = yes
			is_in_faction_with = ROOT
		}
		ENB = {
			is_faction_leader = yes
			is_in_faction_with = ROOT
		}
		VIN = {
			is_faction_leader = yes
			is_in_faction_with = ROOT
		}
	}
}

ROOT_is_in_empire = {
	SWZ = {
		is_faction_leader = yes
		is_in_faction_with = ROOT
	}
}

# Used to check if a nation...wait for it...uses generic concerns! Wow!
uses_generic_concerns = {
	always = no
}

### renaming events trigger
is_american_tag = {
	OR = {
		tag = VIN
	}
}
is_arab_tag = {
	always = no
}
is_brz_portuguese = {
	always = no
}
is_chinese_tag = {
	always = no
}
is_dutch_tag = {
	always = no
}
is_english_tag = {
	OR = {
		tag = ENB
		tag = DEL
		tag = DOK
	}
}
is_french_tag = {
	OR = {
		tag = VAL
		tag = SNK
		tag = EMD
		tag = ROS
	}
}
is_german_tag = {
	OR = {
		tag = SWZ
		tag = FHI
		tag = ASN
	}
}
is_italian_tag = {
	OR = {
		tag = ALN
		tag = WES
	}
}
is_polish_tag = {
	OR = {
		tag = FHI
	}
}
is_russian_tag = {
	OR = {
		tag = SWZ
	}
}
is_south_slav_tag = {
	OR = {
		tag = OST
		tag = ARR
		tag = MEP
		tag = DER
		tag = HZB
		tag = KOR
	}
}
is_turkic_tag = {
	always = no
}

is_central_american_tag = {
  always = no
}

## Useful triggers for the annexation codebase

is_clear_other_claims = {
	NOT = {
		is_important_state = yes
		any_country = {
			is_ally_of_ROOT = yes
			PREV = { is_claim_or_core_of_PREV = yes }
		}
	}
	OR = {
		NOT = { has_variable = ambition_area_@ROOT }
		ROOT = { is_ai = no }
	}
}

has_no_african_interests = {
	OR = {
		has_socialist_government = yes
	}
}
has_war_with_china = {
	always = no
}

### Civil Wars

needs_cheap_infantry = {
	OR = {
		has_civil_war = yes
	}
}

northern_hemisphere_spring = {
	OR = {
		AND = {
			date > 1936.3.20
			date < 1936.6.21
		}
		AND = {
			date > 1937.3.20
			date < 1937.6.21
		}
		AND = {
			date > 1938.3.20
			date < 1938.6.21
		}
		AND = {
			date > 1939.3.20
			date < 1939.6.21
		}
		AND = {
			date > 1940.3.20
			date < 1940.6.21
		}
		AND = {
			date > 1941.3.20
			date < 1941.6.21
		}
		AND = {
			date > 1942.3.20
			date < 1942.6.21
		}
		AND = {
			date > 1943.3.20
			date < 1943.6.21
		}
		AND = {
			date > 1944.3.20
			date < 1944.6.21
		}
		AND = {
			date > 1945.3.20
			date < 1945.6.21
		}
		AND = {
			date > 1946.3.20
			date < 1946.6.21
		}
		AND = {
			date > 1947.3.20
			date < 1947.6.21
		}
		AND = {
			date > 1948.3.20
			date < 1948.6.21
		}
		AND = {
			date > 1949.3.20
			date < 1949.6.21
		}
		AND = {
			date > 1950.3.20
			date < 1950.6.21
		}
	}
}

northern_hemisphere_summer = {
	OR = {
		AND = {
			date > 1936.6.21
			date < 1936.9.22
		}
		AND = {
			date > 1937.6.21
			date < 1937.9.22
		}
		AND = {
			date > 1938.6.21
			date < 1938.9.22
		}
		AND = {
			date > 1939.6.21
			date < 1939.9.22
		}
		AND = {
			date > 1940.6.21
			date < 1940.9.22
		}
		AND = {
			date > 1941.6.21
			date < 1941.9.22
		}
		AND = {
			date > 1942.6.21
			date < 1942.9.22
		}
		AND = {
			date > 1943.6.21
			date < 1943.9.22
		}
		AND = {
			date > 1944.6.21
			date < 1944.9.22
		}
		AND = {
			date > 1945.6.21
			date < 1945.9.22
		}
		AND = {
			date > 1946.6.21
			date < 1946.9.22
		}
		AND = {
			date > 1947.6.21
			date < 1947.9.22
		}
		AND = {
			date > 1948.6.21
			date < 1948.9.22
		}
		AND = {
			date > 1949.6.21
			date < 1949.9.22
		}
		AND = {
			date > 1950.6.21
			date < 1950.9.22
		}
	}
}

northern_hemisphere_autumn = {
	OR = {
		AND = {
			date > 1936.9.22
			date < 1936.12.21
		}
		AND = {
			date > 1937.9.22
			date < 1937.12.21
		}
		AND = {
			date > 1938.9.22
			date < 1938.12.21
		}
		AND = {
			date > 1939.9.22
			date < 1939.12.21
		}
		AND = {
			date > 1940.9.22
			date < 1940.12.21
		}
		AND = {
			date > 1941.9.22
			date < 1941.12.21
		}
		AND = {
			date > 1942.9.22
			date < 1942.12.21
		}
		AND = {
			date > 1943.9.22
			date < 1943.12.21
		}
		AND = {
			date > 1944.9.22
			date < 1944.12.21
		}
		AND = {
			date > 1945.9.22
			date < 1945.12.21
		}
		AND = {
			date > 1946.9.22
			date < 1946.12.21
		}
		AND = {
			date > 1947.9.22
			date < 1947.12.21
		}
		AND = {
			date > 1948.9.22
			date < 1948.12.21
		}
		AND = {
			date > 1949.9.22
			date < 1949.12.21
		}
		AND = {
			date > 1950.9.22
			date < 1950.12.21
		}
	}
}

northern_hemisphere_winter = {
	OR = {
		AND = {
			date > 1936.12.21
			date < 1936.3.20
		}
		AND = {
			date > 1937.12.21
			date < 1937.3.20
		}
		AND = {
			date > 1938.12.21
			date < 1938.3.20
		}
		AND = {
			date > 1939.12.21
			date < 1939.3.20
		}
		AND = {
			date > 1940.12.21
			date < 1940.3.20
		}
		AND = {
			date > 1941.12.21
			date < 1941.3.20
		}
		AND = {
			date > 1942.12.21
			date < 1942.3.20
		}
		AND = {
			date > 1943.12.21
			date < 1943.3.20
		}
		AND = {
			date > 1944.12.21
			date < 1944.3.20
		}
		AND = {
			date > 1945.12.21
			date < 1945.3.20
		}
		AND = {
			date > 1946.12.21
			date < 1946.3.20
		}
		AND = {
			date > 1947.12.21
			date < 1947.3.20
		}
		AND = {
			date > 1948.12.21
			date < 1948.3.20
		}
		AND = {
			date > 1949.12.21
			date < 1949.3.20
		}
		AND = {
			date > 1950.12.21
			date < 1950.3.20
		}
	}
}

owns_ca_trigger = {
	custom_trigger_tooltip = {
		tooltip = owns_ca_trigger_tooltip
		AND = {
			313 = { is_owned_and_controlled_by = ROOT } # Guatemala
			314 = { is_owned_and_controlled_by = ROOT } # El Salvador
			312 = { is_owned_and_controlled_by = ROOT } # Honduras
			842 = { is_owned_and_controlled_by = ROOT } # Honduras
			317 = { is_owned_and_controlled_by = ROOT } # Nicaragua
			1071 = { is_owned_and_controlled_by = ROOT } # Nicaragua
		}
	}
}


ai_air_doctrine_tier_1_trigger = {
	OR = {
		has_tech = naval_strike_tactics
		has_tech = direct_ground_support
		has_tech = low_echelon_support
	}
}

ai_air_doctrine_tier_2_trigger = {
	OR = {
		has_tech = multialtitude_flying
		has_tech = hunt_and_destroy
		has_tech = operational_destruction
	}
}
ai_air_doctrine_tier_3_trigger = {
	OR = {
		has_tech = flying_fortress
		has_tech = naval_strike_torpedo_tactics
		has_tech = infiltration_bombing
	}
}

ai_land_doctrine_tier_1_trigger = {
	OR = {
		has_tech = elastic_defence
		has_tech = mobile_defence
		has_tech = grand_assault
		has_tech = defence_in_depth
	}
}

ai_land_doctrine_tier_2_trigger = {
	OR = {
		has_tech = kampfgruppe
		has_tech = mechanised_offensive
		has_tech = branch_interoperation
		has_tech = infiltration_assault
		has_tech = vast_offensives
		has_tech = large_front_offensive
	}
}
